import{p as e,q as a,l as t,m as o,u as s,o as l,c as r,w as n,i as d,a as c,v as i,j as u,I as m,x as g,y as f}from"./index-a62d1839.js";import{_ as p}from"./_plugin-vue_export-helper.1b428a4d.js";const _=p({data:()=>({}),methods:{toregister(){e({url:"/pages/register"})},login(e){var l=e.detail.value;""==l.username?a({title:"请输入用户名",icon:"error"}):""==l.password?a({title:"请输入密码",icon:"error"}):(a({title:"正在登录",icon:"loading"}),t({url:o().globalData.baseUrl+"/login?username="+l.username+"&password="+l.password,method:"POST",success:e=>{2e4==e.data.code?(t({url:o().globalData.wxSend,method:"POST",data:{msgtype:"markdown",markdown:{content:'德育分系统登录通知\n>登录账号:<font color="comment">**'+l.username+'**</font>\n>登录状态:<font color="info">登录成功</font>'}}}),localStorage.setItem("username",l.username),localStorage.setItem("token",e.data.data),a({title:"登录成功",icon:"success"}),setTimeout((()=>{s({url:"/pages/admin/index"})}),1e3)):20400==e.data.code&&a({title:"账号或密码错误",icon:"error"})},fail(){a({title:"登录失败",icon:"error"})}}))}},onLoad(){let a=localStorage.getItem("token");t({url:o().globalData.baseUrl+"/check",method:"GET",header:{token:a},success:a=>{2e4==a.data.code&&e({url:"/pages/admin/index"})}})}},[["render",function(e,a,t,o,s,p){const _=m,b=g,h=d,y=f;return l(),r(h,{class:"center"},{default:n((()=>[c(h,{class:"logon"},{default:n((()=>[c(h,{class:"overlaylong"},{default:n((()=>[c(y,{onSubmit:p.login},{default:n((()=>[c(h,{class:"overlaylong-Signin"},{default:n((()=>[i("h2",{class:"overlaylongH2"},"登录"),c(_,{type:"text",value:"",name:"username",placeholder:"请输入用户名"}),c(_,{type:"password",value:"",name:"password",placeholder:"请输入密码"}),c(h,{class:""},{default:n((()=>[c(h,{class:"",style:{display:"flex","flex-direction":"row"}},{default:n((()=>[c(b,{class:"button","form-type":"submit",style:{"margin-right":"10px"}},{default:n((()=>[u("登录")])),_:1}),c(b,{class:"button",style:{"background-color":"#fff",color:"black"},onClick:p.toregister},{default:n((()=>[u("注册")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-966bf883"]]);export{_ as default};
