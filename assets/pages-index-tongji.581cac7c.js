import{l as a,m as s,o as t,c as e,w as r,i as o,a as l,r as c}from"./index-a62d1839.js";import{_ as i}from"./qiun-data-charts.bbf5fc76.js";import{r as d}from"./uni-app.es.4388576a.js";import{_ as h}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-cloud.es.8c8387e1.js";const n=h({data:()=>({stuList:[],causeList:[],pieArr:[],yesterdayDate:"",ChartsDate1:{},ChartsDate2:{},causeArr:{},jia:[],jian:[],opts:{color:["#00e6e6","#91CB74","#FAC858","#EE6666","#00aaff","#3CA272","#FC8452","#9A60B4","#ea7ccc","#ffff00","#ff5500"],padding:[15,15,0,5],enableScroll:!1,legend:{show:!0},xAxis:{boundaryGap:"justify",disableGrid:!1,min:0,axisLine:!0,max:100},yAxis:{showTitle:!1},extra:{word:{type:"normal",autoColors:!0},mount:{type:"mount",widthRatio:1.5},pie:{activeOpacity:.5,activeRadius:10,offsetAngle:0,labelWidth:15,border:!0,borderWidth:3,borderColor:"#FFFFFF"},bar:{type:"group",width:15,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"custom",barBorderCircle:!0,seriesGap:2,categoryGap:2,customColor:["#00aaff","#00ffff"]}}}}),onReady(){setTimeout((()=>{this.pjfChart(),this.wordChart()}),1e3),setInterval((()=>{this.wordChart()}),5e3)},methods:{getInfo(){a({url:s().globalData.baseUrl+"/findscore",method:"GET",success:a=>{this.stuList=a.data}}),a({url:s().globalData.baseUrl+"/causelist",method:"GET",success:a=>{this.causeList=a.data}})},wordChart(){let a=this.causeList,s={series:[]};a=a.filter(((a,s,t)=>t.findIndex((s=>s.classs===a.classs))===s)),a.map(((a,t)=>{s.series.push(Object.assign({},{name:a.name+" "+a.cause+" "+a.score+"分",textSize:this.getRand(12,24),data:void 0}))})),this.causeArr=s},getRand:(a,s)=>Math.floor(Math.random()*(a-s+1))+s,pjfChart(){let a={categories:[],series:[{name:"德育平均分",data:[]}]},t={categories:[],series:[{name:"德育平均分",data:[]}]},e=this.stuList,r=[];e.map(((a,s)=>{r.push(Object.assign({},{classs:a.classs,score:a.score}))}));var o=[];r.filter(((a,s,t)=>t.findIndex((s=>s.classs===a.classs))===s)).map(((a,s)=>{o.push(Object.assign({},{classs:a.classs,score:a.score}))}));let l=[];for(var c=0;c<o.length;c++){var i=r.filter((function(a){return a.classs==o[c].classs}));l.push(i)}let d=0,h=0;for(c=0;c<l.length;c++){let a=l[c];for(var n=0;n<a.length;n++)d+=a[n].score,h=(d/l[c].length).toFixed(2);d=0,o[c].score=h}o=o.sort(((a,s)=>s.score-a.score));for(c=0;c<o.length;c++)o[c].classs.includes(s().globalData.dayi)?(a.categories.push(o[c].classs),a.series[0].data.push(o[c].score)):o[c].classs.includes(s().globalData.daer)&&(t.categories.push(o[c].classs),t.series[0].data.push(o[c].score));this.ChartsDate1=a,this.ChartsDate2=t}},onLoad(){a({url:s().globalData.baseUrl+"/findscore",method:"GET",success:a=>{this.stuList=a.data}}),a({url:s().globalData.baseUrl+"/causelist",method:"GET",success:a=>{for(var s=0;s<a.data.length;s++)a.data[s].score>0&&(a.data[s].score="+"+a.data[s].score);let t=[];for(s=0;s<a.data.length;s++)a.data[s].date==this.yesterdayDate&&t[0].push(a.data[s]);console.log(t),this.causeList=a.data}})}},[["render",function(a,s,h,n,u,p){const f=d(c("qiun-data-charts"),i),g=o;return t(),e(g,{class:"box"},{default:r((()=>[l(g,{class:"charts-box",style:{background:"rgba(255, 255, 255,0)"}},{default:r((()=>[l(f,{type:"word",opts:u.opts,chartData:u.causeArr,background:"rgba(255, 255, 255,0)"},null,8,["opts","chartData"])])),_:1}),l(g,{class:"charts-box"},{default:r((()=>[l(f,{type:"bar",opts:u.opts,chartData:u.ChartsDate1},null,8,["opts","chartData"])])),_:1}),l(g,{class:"charts-box",style:{"margin-bottom":"20px","margin-top":"20px"}},{default:r((()=>[l(f,{type:"bar",opts:u.opts,chartData:u.ChartsDate2},null,8,["opts","chartData"])])),_:1})])),_:1})}],["__scopeId","data-v-718ede39"]]);export{n as default};
