import{s as a,q as e,l as s,m as o,B as t,C as l,o as r,f as n,a as i,w as c,F as u,i as d,v as f,j as m,r as p,I as g,x as w,y as _}from"./index-a62d1839.js";import{_ as h}from"./uni-icons.e66cfeb5.js";import{r as v}from"./uni-app.es.4388576a.js";import{_ as b}from"./_plugin-vue_export-helper.1b428a4d.js";const y=b({data:()=>({}),methods:{back(){a({url:"/pages/login"})},login(l){var r=l.detail.value;""==r.username?e({title:"请输入用户名",icon:"error"}):""==r.password?e({title:"请输入密码",icon:"error"}):r.password!=r.repassword?e({title:"两次密码输入不一致",icon:"error"}):6<r.password.length<16&&!/^(?=.*[a-zA-Z])(?=.*\d).{6,19}$/.test(r.password)?e({title:"密码长度需6-16位包含数字字母",icon:"error"}):(e({title:"正在注册，请稍候...",icon:"loading"}),setTimeout((()=>{s({url:o().globalData.baseUrl+"/userregister",method:"POST",data:{username:r.username,password:r.password},success:l=>{t(),200==l.statusCode?(e({title:"注册成功",icon:"success"}),s({url:o().globalData.wxSend,method:"POST",data:{msgtype:"markdown",markdown:{content:'德育分系统账号<font color="info">**注册**</font>通知\n><font color="comment">注册账号:</font>'+r.username}}}),setTimeout((()=>{a({url:"/pages/login"})}),1e3)):e({title:"注册失败",icon:"fail"})}})}),1e3))}},onLoad(){l({title:"提示",content:"注册成功后无权限，暂时无法登录\n请等待管理员添加完权限后才能登录",showCancel:!0,confirmText:"知道了",confirmColor:"#00aaff",cancelColor:"#ff0000",success:function(a){a.confirm||a.cancel}})}},[["render",function(a,e,s,o,t,l){const b=v(p("uni-icons"),h),y=d,x=g,C=w,j=_;return r(),n(u,null,[i(y,{class:"fab",onClick:l.back},{default:c((()=>[i(b,{type:"undo-filled",size:"30",color:"#fff"})])),_:1},8,["onClick"]),i(y,{class:"center"},{default:c((()=>[i(y,{class:"logon"},{default:c((()=>[i(y,{class:"overlaylong"},{default:c((()=>[i(j,{onSubmit:l.login},{default:c((()=>[i(y,{class:"overlaylong-Signin"},{default:c((()=>[f("h2",{class:"overlaylongH2"},"注册"),i(x,{type:"text",value:"",name:"username",placeholder:"请输入部门+姓名(XXX部 张三)"}),i(x,{type:"password",value:"",name:"password",placeholder:"请输入密码"}),i(x,{type:"password",value:"",name:"repassword",placeholder:"请再次输入密码"}),i(C,{class:"inupbutton","form-type":"submit"},{default:c((()=>[m("注册")])),_:1})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})],64)}],["__scopeId","data-v-e3433faf"]]);export{y as default};
